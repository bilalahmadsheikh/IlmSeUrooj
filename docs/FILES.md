# IlmSeUrooj - Complete File Reference

A detailed documentation of every file in the project, explaining what each file contains and its purpose.

---

## Table of Contents
1. [Root Directory Files](#root-directory-files)
2. [Source Files (src/)](#source-files-src)
3. [Public Assets (public/)](#public-assets-public)
4. [Documentation (docs/)](#documentation-docs)

---

## Root Directory Files

### `package.json`
**Purpose**: Node.js project configuration and dependencies

**Contents**:
```json
{
  "name": "ilmseurroj",
  "version": "0.1.0",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  }
}
```

**Dependencies**:
- `next`: ^16.1.1 - React framework
- `react`: ^19.2.3 - UI library
- `react-dom`: ^19.2.3 - React DOM renderer

**Dev Dependencies**:
- `cheerio`: ^1.0.0 - HTML parsing for static sites
- `puppeteer`: ^21.0.0 - Headless browser for JavaScript-heavy sites
- `axios`: ^1.6.0 - HTTP client with retry logic
- `@babel/parser`: ^7.23.0 - Parse JavaScript to AST
- `@babel/traverse`: ^7.23.0 - Traverse and modify AST
- `@babel/generator`: ^7.23.0 - Generate code from AST
- `recast`: ^0.23.0 - Preserve formatting when updating files

---

### `package-lock.json`
**Purpose**: Locks exact dependency versions for reproducible builds
**Size**: ~210KB
**Note**: Auto-generated by npm, do not edit manually

---

### `jsconfig.json`
**Purpose**: JavaScript project configuration for VS Code

**Contents**:
```json
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

**What it does**: Enables `@/` path alias (e.g., `@/components/Header`)

---

### `next.config.mjs`
**Purpose**: Next.js framework configuration

**Contents**:
```javascript
const nextConfig = {};
export default nextConfig;
```

**Note**: Currently uses default configuration

---

### `eslint.config.mjs`
**Purpose**: ESLint code linting configuration

**What it does**: Enforces code quality and style rules

---

### `README.md`
**Purpose**: Quick start guide for the project

**Contents**:
- What the project is
- How to install and run
- Basic commands

---

### `.gitignore`
**Purpose**: Specifies files Git should ignore

**Ignored items**:
- `node_modules/` - Dependencies
- `.next/` - Build output
- `.env*` - Environment variables
- `*.log` - Log files

---

## Source Files (src/)

### `src/app/`

#### `src/app/layout.js`
**Purpose**: Root layout wrapper for all pages

**What it does**:
- Wraps entire app with `ThemeProvider`
- Adds HTML `<head>` metadata
- Sets up global fonts
- Contains `<Header />` component

**Key code**:
```javascript
export default function RootLayout({ children }) {
  return (
    <ThemeProvider>
      <Header />
      {children}
    </ThemeProvider>
  );
}
```

---

#### `src/app/page.js`
**Purpose**: Main homepage component (~600 lines)

**What it contains**:
- Filter state management (6 filters)
- Saved universities state (with localStorage)
- University ranking/sorting logic
- All section components rendered

**Sections rendered**:
1. `FilterSection` - Dropdown filters
2. `SwipeCard` - Tinder-style cards
3. `SavedList` - Saved universities panel
4. `UniversityList` - Expandable list
5. `AdmissionPredictor` - Merit calculator
6. `UniversityComparison` - Side-by-side comparison
7. `AdmissionsDeadlines` - Deadline tracker

**Key functions**:
- `handleSave(university)` - Add to saved list
- `handleSkip()` - Move to next card
- `handleRemove(id)` - Remove from saved

---

#### `src/app/globals.css`
**Purpose**: Global CSS styles and design system (~800 lines)

**What it contains**:
- CSS custom properties (variables)
- Dark theme colors
- Light theme colors
- Base element styles
- Utility classes
- Animation keyframes

**CSS Variables defined**:
```css
:root {
  /* Dark Theme (default) */
  --bg-primary: #0a0f0a;
  --bg-secondary: #1a2f1a;
  --accent: #2d5a3d;
  --text-primary: #e8f5e9;
  
  /* Spacing, fonts, shadows, etc. */
}

[data-theme="light"] {
  --bg-primary: #f8f5e9;
  --bg-secondary: #fff8e7;
  --text-primary: #1a2f1a;
}
```

---

#### `src/app/page.module.css`
**Purpose**: Page-specific CSS module

**What it contains**: Layout styles for homepage sections

---

### `src/components/`

#### `src/components/Header/Header.js`
**Purpose**: Navigation bar component

**What it contains**:
- Logo and site title ("IlmSeUrooj")
- Theme toggle button
- Navigation links (if any)

**Props**: None (uses ThemeContext)

---

#### `src/components/Header/Header.module.css`
**Purpose**: Header styling

**Key styles**:
- Fixed/sticky positioning
- Flex layout for logo + toggle
- Glass-morphism background
- Mobile responsive

---

#### `src/components/FilterSection/FilterSection.js`
**Purpose**: 6 filter dropdowns container (~200 lines)

**What it contains**:
- 6 `SearchableSelect` dropdown components
- Filter labels and layout

**Props received**:
| Prop | Type | Purpose |
|------|------|---------|
| `filters` | Object | Current filter values |
| `setFilters` | Function | Update filter state |
| `filterOptions` | Object | Available options |

---

#### `src/components/FilterSection/FilterSection.module.css`
**Purpose**: Filter section styling

**Key styles**:
- Grid layout (2-3 columns)
- Mobile: 2 columns
- Desktop: 3 columns
- Dropdown labels

---

#### `src/components/SearchableSelect/SearchableSelect.js`
**Purpose**: Reusable dropdown with search (~150 lines)

**What it does**:
- Shows selected value
- Opens dropdown on click
- Filters options as you type
- Keyboard navigation (arrow keys, enter)
- Closes on click outside

**Props**:
| Prop | Type | Purpose |
|------|------|---------|
| `options` | Array | `[{ value, label }]` |
| `value` | String | Currently selected |
| `onChange` | Function | Selection handler |
| `placeholder` | String | Empty state text |
| `label` | String | Dropdown label |

---

#### `src/components/SearchableSelect/SearchableSelect.module.css`
**Purpose**: Dropdown styling

**Key styles**:
- Dropdown trigger button
- Options list (absolute positioned)
- Hover/focus states
- Z-index: 1000+ for overlay

---

#### `src/components/SwipeCard/SwipeCard.js`
**Purpose**: Tinder-style swipeable card (~300 lines)

**What it does**:
- Displays university info on card
- Handles drag/swipe gestures
- Card flip animation for details
- Save (ðŸ’š) and Skip (âœ•) buttons
- Color overlay during swipe

**Props**:
| Prop | Type | Purpose |
|------|------|---------|
| `university` | Object | University data |
| `onSave` | Function | Called on right swipe |
| `onSkip` | Function | Called on left swipe |
| `matchPercentage` | Number | Filter match score |

**State**:
- `isFlipped` - Card flip state
- `dragX` - Horizontal drag position
- `isDragging` - Drag in progress

---

#### `src/components/SwipeCard/SwipeCard.module.css`
**Purpose**: Swipe card styling (~200 lines)

**Key styles**:
- 3D card flip animation
- Drag transform
- Green/red overlays
- Button styling
- Mobile touch handling

---

#### `src/components/SavedList/SavedList.js`
**Purpose**: Saved universities sidebar panel (~100 lines)

**What it does**:
- Shows list of saved universities
- Remove button for each
- Collapse/expand toggle
- Empty state message

**Props**:
| Prop | Type | Purpose |
|------|------|---------|
| `savedUniversities` | Array | List of saved unis |
| `onRemove` | Function | Remove handler |

---

#### `src/components/SavedList/SavedList.module.css`
**Purpose**: Saved panel styling

**Key styles**:
- Sidebar positioning
- Card list layout
- Remove button
- Collapse animation

---

#### `src/components/UniversityList/UniversityList.js`
**Purpose**: Expandable university cards list (~250 lines)

**What it does**:
- Shows universities as cards
- "View More" progressive loading (5â†’10â†’15â†’All)
- Expand/collapse card details
- Field ranking badges

**Props**:
| Prop | Type | Purpose |
|------|------|---------|
| `universities` | Array | Sorted university list |
| `selectedField` | String | Current field filter |

**State**:
- `expandedId` - Currently expanded card
- `visibleCount` - How many shown (5/10/15/all)

---

#### `src/components/UniversityList/UniversityList.module.css`
**Purpose**: University list styling

**Key styles**:
- Card grid/list layout
- Expand animation
- Ranking badges
- Program/facility tags

---

#### `src/components/AdmissionPredictor/AdmissionPredictor.js`
**Purpose**: Merit calculator component (~700 lines)

**What it contains**:
- `admissionCriteria` object (lines 9-350):
  - 22 campus-specific entries
  - Merit formulas, cutoffs, history, tips
- Input sliders (FSc, Matric, Test)
- Education status dropdown
- University/Field selectors
- Aggregate calculation logic
- Result display with history

**Key function**:
```javascript
function calculateUserAggregate(fsc, matric, testScore, uniName, educationStatus) {
  // Returns calculated aggregate based on university formula
}
```

**Campus data structure**:
```javascript
'FAST Isb': {
  minFsc: 60,
  competitiveFsc: 73,
  formula: 'NU Test (50%) + FSc Part-I (50%)',
  formulaBreakdown: [...],
  cutoffs: { cs: 73, se: 70, ai: 68 },
  meritHistory: { 2024: {...}, 2023: {...} },
  tips: '...'
}
```

---

#### `src/components/AdmissionPredictor/AdmissionPredictor.module.css`
**Purpose**: Predictor styling (~150 lines)

**Key styles**:
- Input sliders
- Result cards
- Formula breakdown display
- History table
- Tips section

---

#### `src/components/UniversityComparison/UniversityComparison.js`
**Purpose**: Side-by-side comparison tool (~400 lines)

**What it does**:
- Compare up to 3 universities
- Department filter dropdown
- Comparison criteria modes (5 types)
- "Best" badges for top values
- Dynamic metrics based on criteria

**Props**: None (uses internal state + data imports)

**State**:
- `selectedUnis` - Array of 3 university IDs
- `department` - Selected department
- `criteria` - Comparison mode

---

#### `src/components/UniversityComparison/UniversityComparison.module.css`
**Purpose**: Comparison table styling

**Key styles**:
- 3-column grid
- Best badge styling
- Metric rows
- Header styling

---

#### `src/components/AdmissionsDeadlines/AdmissionsDeadlines.js`
**Purpose**: Deadline tracker component (~200 lines)

**What it does**:
- Shows upcoming/elapsed deadlines
- Toggle between upcoming/elapsed
- Field filter
- "View More" expansion
- Countdown calculation
- Urgency color coding

**State**:
- `showElapsed` - Toggle state
- `fieldFilter` - Selected field
- `visibleCount` - How many shown

---

#### `src/components/AdmissionsDeadlines/AdmissionsDeadlines.module.css`
**Purpose**: Deadline cards styling

**Key styles**:
- Card layout
- Urgency colors (red/orange/yellow/green)
- Toggle switch
- Apply button

---

#### `src/components/ThemeToggle/ThemeToggle.js`
**Purpose**: Dark/Light mode switch (~50 lines)

**What it does**:
- Sun/moon icon button
- Toggles theme via ThemeContext
- Smooth icon transition

---

#### `src/components/ThemeToggle/ThemeToggle.module.css`
**Purpose**: Toggle button styling

**Key styles**:
- Icon sizing
- Hover effects
- Transition animation

---

#### `src/components/Background/DecorativeImages.js`
**Purpose**: Theme-aware decoration elements (~100 lines)

**What it does**:
- Renders compass, books, graduation cap images
- Position based on theme
- Lazy loading for performance

---

#### `src/components/Background/DecorativeImages.module.css`
**Purpose**: Decoration positioning

**Key styles**:
- Absolute positioning
- Opacity transitions
- Theme-specific visibility

---

#### `src/components/Background/SectionBackground.js`
**Purpose**: Section-specific backgrounds (~80 lines)

**What it does**:
- Full-page map backgrounds for treasure theme
- Section gradients

---

#### `src/components/Background/SectionBackground.module.css`
**Purpose**: Section background styling

---

#### `src/components/Background/AnimatedBackground.js`
**Purpose**: Animated background effects

**What it does**: Particle or gradient animations (if enabled)

---

#### `src/components/Background/AnimatedBackground.module.css`
**Purpose**: Animation keyframes and styles

---

### `src/context/`

#### `src/context/ThemeContext.js`
**Purpose**: Theme state management (~60 lines)

**What it provides**:
- `theme` - Current theme ('dark' | 'light' | 'treasure')
- `setTheme` - Theme setter
- `toggleTheme` - Switch between dark/light

**Usage**:
```javascript
const { theme, toggleTheme } = useTheme();
```

**Persistence**: Saves to localStorage

---

### `src/data/`

#### `src/data/universities.js`
**Purpose**: Main university database (~600 lines)

**What it contains**:

**1. `universities` array** (28 entries):
```javascript
{
  id: 1,
  name: "FAST-NUCES Islamabad Campus",
  shortName: "FAST Isb",
  logo: "/logos/fast.png",
  city: "Islamabad",
  established: 2000,
  type: "Private",
  ranking: 3,
  fieldRankings: { "Computer Science": 1, ... },
  campusType: "Industry-Focused",
  hostelAvailability: "On-Campus with Hostel",
  fields: ["Computer Science", "Pre-Engineering"],
  programs: { "Computer Science": ["CS", "SE", "AI"], ... },
  degreeLevel: ["Undergraduate", "Graduate"],
  highlights: ["#1 CS University", ...],
  description: "...",
  website: "https://...",
  avgFee: "PKR 180,000 - 280,000",
  admissions: { deadline: "2026-06-15", testName: "...", ... }
}
```

**2. `upcomingDeadlines` array** (23 entries):
```javascript
{
  id: 1,
  university: "FAST Islamabad",
  shortName: "FAST Isb",
  program: "CS, SE, AI, DS",
  field: "Computer Science",
  deadline: "2026-06-15",
  testName: "FAST NU Test",
  testDate: "2026-06-25",
  session: "Fall 2026",
  applyUrl: "https://..."
}
```

**3. `filterOptions` object**:
- `fields` - Field categories
- `degreeLevel` - Degree options
- `programs` - Programs by field
- `hostelAvailability` - Hostel options
- `cities` - City list (13 cities)
- `campusType` - Campus focus options

---

#### `src/data/departmentData.js`
**Purpose**: Department-specific comparison metrics (~400 lines)

**What it contains**:
For each university and department:
```javascript
{
  "NUST": {
    "Computer Science": {
      ranking: 2,
      facultyStrength: 4.5,
      researchOutput: 4.2,
      placementRate: 92,
      avgSalary: 120000,
      topRecruiters: ["Google", "Microsoft", ...],
      keyFacilities: ["AI Lab", "HPC Cluster", ...],
      phdFaculty: 75,
      researchPapers: 450
    },
    "Pre-Engineering": { ... }
  }
}
```

---

### `src/utils/`

#### `src/utils/ranking.js`
**Purpose**: University ranking algorithm (~100 lines)

**What it contains**:
- `calculateMatchScore(university, filters)` - Match percentage
- `sortByRanking(universities, field)` - Field-specific sorting

**Scoring logic**:
```javascript
// Priority weights
Exact Program Match: 40 points
Field Match: 30 points
Hostel Match: 15 points
City Match: 10 points
Campus Type Match: 5 points
```

---

## Public Assets (public/)

### `public/images/`

| File | Size | Purpose |
|------|------|---------|
| `map.png` | 30KB | Pakistan map outline |
| `pakistan.png` | 30KB | Pakistan map variant |
| `map_newspaper.png` | 619KB | Treasure theme background 1 |
| `map_newspaper2.png` | 791KB | Treasure theme background 2 |
| `map_newspaper3.png` | 777KB | Treasure theme background 3 |
| `map_writing1.png` | 499KB | Treasure theme with calligraphy |
| `education.png` | 46KB | Education decoration |
| `education1.png` | 78KB | Education decoration variant |
| `culture.png` | 69KB | Cultural decoration |
| `culture1.png` | 44KB | Cultural decoration variant |
| `scenery.png` | 51KB | Scenery decoration |
| `scenery1.png` | 44KB | Scenery decoration variant |

### `public/` (root)

| File | Purpose |
|------|---------|
| `file.svg` | Default file icon |
| `globe.svg` | Globe icon |
| `next.svg` | Next.js logo |
| `vercel.svg` | Vercel logo |
| `window.svg` | Window icon |

---

## Documentation (docs/)

| File | Lines | Purpose |
|------|-------|---------|
| `README.md` | ~120 | Project overview, quick stats |
| `architecture.md` | ~200 | Component structure, data flow |
| `CHANGELOG.md` | ~300 | Complete development history |
| `FEATURES.md` | ~380 | Detailed feature documentation |
| `FILES.md` | This file | File-by-file reference |
| `SCRAPERS.md` | ~400 | Scraper implementations and usage guide |
| `iteration-1.md` | ~40 | Iteration 1 details |
| `iteration-2.md` | ~40 | Iteration 2 details |
| `iteration-3.md` | ~70 | Iteration 3 details |
| `iteration-4.md` | ~50 | Iteration 4 details |

---

---

## Scripts (`scripts/`)

### `scripts/scrapers/`

#### `scripts/scrapers/base-scraper.js`
**Purpose**: Base class for all scrapers (~130 lines)
**What it provides**:
- Common scraping utilities (Cheerio, Puppeteer)
- Date and fee extraction helpers
- Rate limiting and error handling
- Resource cleanup methods

#### `scripts/scrapers/recruiter-scraper.js`
**Purpose**: Scrapes top recruiters from university career pages (~120 lines)
**What it does**:
- Scrapes career services pages
- Extracts recruiter names from HTML
- Falls back to known recruiters if scraping fails
- Outputs to `reports/recruiter-data.json`

#### `scripts/scrapers/salary-scraper.js`
**Purpose**: Scrapes salary data from various sources (~80 lines)
**What it does**:
- Attempts Glassdoor/LinkedIn (may require auth)
- Falls back to industry reports and HEC surveys
- Returns average starting salaries and ranges
- Outputs to `reports/salary-data.json`

#### `scripts/scrapers/facilities-scraper.js`
**Purpose**: Scrapes facilities information (~120 lines)
**What it does**:
- Scrapes university facilities pages
- Extracts facilities using keyword matching
- Filters common facilities (Library, Labs, Sports, etc.)
- Outputs to `reports/facilities-data.json`

#### `scripts/scrapers/merit-scraper.js`
**Purpose**: Scrapes merit cutoff data from community sites (~135 lines)
**What it does**:
- Uses Cheerio for static sites, Puppeteer for dynamic
- Extracts merit percentages and positions
- Handles multiple data formats
- Generates structured reports for manual review
- Outputs to `reports/merit-report.json` and `.md`

#### `scripts/scrapers/semester-scrapers.js`
**Purpose**: Wrapper for semester data scrapers (~20 lines)
**What it does**:
- Exports RecruiterScraper, SalaryScraper, FacilitiesScraper
- Can be run directly to test all semester scrapers

#### `scripts/scrapers/deadline-scraper.js`
**Purpose**: Standalone scraper for admission deadlines (20-day cycle).
**What it does**:
- Checks official admission pages for all universities
- Verifies deadline and test dates
- Updates `lastVerified` timestamps
- Sorts data by closest deadline first

### `scripts/validators/`

#### `scripts/validators/schema-validator.js`
**Purpose**: Validates `universities.js` against a strict schema. Checks data types, required fields, and enum values.

#### `scripts/validators/compare-data.js`
**Purpose**: Compares new data against baseline to detect changes. Generates change reports.

#### `scripts/validators/data-integrity.js`
**Purpose**: Checks logical relationships (e.g., if `deadline` exists, `applyUrl` should exist).

#### `scripts/validators/data-target-map.js`
**Purpose**: Maps which fields belong to which scraping tier.

#### `scripts/validators/auto-review.js`
**Purpose**: Generates AI-style review comments for Pull Requests based on change size and criticality.

#### `scripts/validators/semester-data-validator.js`
**Purpose**: Validates scraped semester data (~150 lines)
**What it does**:
- Validates recruiter data format
- Validates salary data ranges (reasonable values)
- Validates facilities data completeness
- Generates validation reports
- Exits with error code if validation fails

### `scripts/utils/`

#### `scripts/utils/http-client.js`
**Purpose**: HTTP request wrapper with retry logic (~100 lines)
**What it provides**:
- `fetchWithRetry()` - Retry failed requests with exponential backoff
- `fetchHTML()` - Fetch HTML content
- `fetchJSON()` - Fetch JSON content
- Handles timeouts, redirects, and status codes

#### `scripts/utils/ast-manipulator.js`
**Purpose**: AST parsing and file updating utilities (~250 lines)
**What it provides**:
- `parseFile()` - Parse JavaScript file to AST
- `findUniversityNode()` - Find university by shortName or id
- `updateUniversityField()` - Update field while preserving formatting
- Uses Babel parser and Recast for safe file updates

#### `scripts/utils/rate-limiter.js`
**Purpose**: Rate limiting utilities (~60 lines)
**What it provides**:
- `delay()` - Simple delay function
- `RateLimiter` class - Rate limiter with configurable delay
- `withRateLimit()` - Wrapper for rate-limited functions

#### `scripts/utils/url-checker.js`
**Purpose**: Validates that all university URLs are accessible (~130 lines)
**What it does**:
- Makes actual HTTP HEAD requests (no longer placeholder)
- Checks status codes (200-399 = success)
- Measures response times
- Handles redirects and timeouts
- Generates detailed reports

### Root Scripts

#### `scripts/fetch-university-data.js`
**Purpose**: Main pipeline orchestrator (~200 lines)
**What it does**:
- Scrapes admission deadlines, fees, and test dates
- Uses BaseScraper for actual web scraping
- Updates `universities.js` using AST manipulation
- Handles errors gracefully
- Generates reports

#### `scripts/test-scrapers.js`
**Purpose**: Test all scraper implementations (~80 lines)
**What it does**:
- Tests recruiter, salary, facilities, and merit scrapers
- Reports pass/fail status
- Exits with error code if any test fails

#### `scripts/test-file-updates.js`
**Purpose**: Test AST manipulation (~100 lines)
**What it does**:
- Tests file parsing
- Tests node finding
- Tests field updates
- Creates backup before testing
- Restores backup after testing

#### `scripts/generate-baseline.js`
**Purpose**: Creates a snapshot of current data for diffing.

---

## Workflows (`.github/workflows/`)

#### `.github/workflows/update-university-data.yml`
**Purpose**: Main automation workflow.
**Schedule**: Tier 1 (20 days) & Tier 2 (Bimonthly).
**Jobs**: Fetch, Validate, Create PR, Notify.

#### `.github/workflows/semester-data-update.yml`
**Purpose**: Full data refresh at semester start (March/Sept).

#### `.github/workflows/annual-merit-update.yml`
**Purpose**: Scrapes new merit lists once a year (Nov).

#### `.github/workflows/website-health-check.yml`
**Purpose**: Weekly check for broken university links.

#### `.github/workflows/deadline-verification.yml`
**Purpose**: Automated deadline verification (every 20 days).
**What it does**:
- Runs deadline-scraper.js
- Commits changes directly if confirmed
- Uploads verification reports

---

## File Count Summary

| Directory | JS Files | CSS Files | YAML | Other | Total |
|-----------|----------|-----------|------|-------|-------|
| `src/app/` | 2 | 2 | - | - | 4 |
| `src/components/` | 11 | 11 | - | - | 22 |
| `src/context/` | 1 | - | - | - | 1 |
| `src/data/` | 2 | - | - | - | 2 |
| `src/utils/` | 1 | - | - | - | 1 |
| `scripts/` | 21 | - | - | - | 21 |
| `.github/workflows/` | - | - | 4 | - | 4 |
| `public/` | - | - | - | 17 | 17 |
| `docs/` | - | - | - | 12 | 12 |
| Root | - | - | - | 8 | 8 |
| **Total** | **28** | **13** | **4** | **37** | **82** |


---

## Lines of Code Estimate

| Category | Approx Lines |
|----------|--------------|
| JavaScript/JSX | ~4,500 |
| CSS | ~2,000 |
| JSON | ~500 |
| Markdown | ~1,500 |
| **Total** | **~8,500** |
