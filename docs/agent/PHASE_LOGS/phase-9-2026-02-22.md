# Phase 9: Apply URL Corrections & Autofill Intelligence Fixes
**Date**: 2026-02-22 | **Duration**: ~2 hours

## What Was Done

### Apply URL Corrections
Updated `src/data/universities.js` (both university cards and upcoming deadlines) with verified admission portal links for 11 universities (30+ individual URL changes):
- FAST → admissions.nu.edu.pk
- COMSATS → admissions.comsats.edu.pk
- IBA → onlineadmission.iba.edu.pk
- UET Lahore → admission.uet.edu.pk/Modules/EntryTest/Default.aspx
- UET Taxila → admissions.uettaxila.edu.pk
- NED → www.neduet.edu.pk/admission
- Air University → portals.au.edu.pk/admissions
- Bahria → cms.bahria.edu.pk/Logins/candidate/Login.aspx
- Habib → eapplication.habib.edu.pk/login.aspx
- SZABIST → admissions.szabist.edu.pk
- AKU → akuross.aku.edu PeopleSoft portal

### Extension Sidebar Detection Fixes
Added 20+ missing portal subdomains to `UNIVERSITY_DOMAINS` in `content.js`. The root cause was that `detectUniversity()` checked this dictionary, and subdomains like `portals.au.edu.pk` were not listed (only `au.edu.pk`).

### Name Splitting
Added `first_name`, `last_name`, `middle_name` transforms to split `full_name` for forms that ask for names separately (SZABIST, LUMS, etc.).

### Field Exclusion
Added `EXCLUDED_FIELD_PATTERNS` to prevent heuristic autofill from filling captcha, login, verification, OTP, and CSRF fields.

### Extension Context Guard
Added `isExtensionValid()` + "Please Refresh" UI for when extension is reloaded but page isn't refreshed.

### Skip Tier 2 for Known Universities
Added `!uniConfig` condition so Tier 2 AI mapping (Ollama) is only called for completely unknown universities.

## Files Changed
- `src/data/universities.js` — 30+ applyUrl corrections
- `extension/content/content.js` — name splitting, exclusions, context guard, 20+ domains
- `extension/universities/index.js` — portal subdomain additions
- `docs/DATA-SOURCES.md` — Application Form Link column
- `docs/CHANGELOG.md` — Iterations 8 & 9
- `docs/agent/PROGRESS.md` — Phase 9
- `docs/agent/DECISIONS.md` — Decisions 11-13

## Acceptance Criteria
- [x] All apply URLs point to correct portals
- [x] Extension sidebar shows on Air University, Bahria CMS, Habib eApplication
- [x] Name is split correctly for First/Middle/Last name fields
- [x] Captcha/login fields excluded from autofill
- [x] Extension context invalidation shows friendly "refresh" message
- [x] Syntax checks pass on all modified files
